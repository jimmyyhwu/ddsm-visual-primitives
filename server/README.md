# Expert Annotation Web Interface

## Prerequisites

You will need to generate unit visualizations before using the web interface. Please use the code in [`unit_visualization`](../unit_visualization) to do so. You will also need to modify the `static/raw` symlink to point to the correct location of `ddsm_raw` if you are not using the default data locations.

Next, set up the `static/unit_vis` and `static/unit_vis_subset` directories. The `static/unit_vis` directory is already set up as a symlink to the output images generated by unit visualization. Since some CNN layers have many more units than is feasible for annotation, we also create symlinks in the `static/unit_vis_subset` directory to only show a subset of the units in each layer.

If you used our pretrained models to generate unit visualizations, the `static/unit_vis` and `static/unit_vis_subset` directories are already set up properly, and should exactly reproduce the visualizations shown to our expert annotators. If you would like to visualize your own trained models, you can modify the symlinks accordingly.

## Usage

Please run the following script to cache the validation set patch labels into a `.pickle` file:

```bash
python cache_patch_labels.py
```

To start up the server, use the following commands:

```bash
export FLASK_APP=server.py
flask run -h 0.0.0.0
```

You can then visit `localhost:5000` in a web browser to view the annotation web interface.

A summary of all annotations from all expert annotators is shown at `localhost:5000/summary`.
